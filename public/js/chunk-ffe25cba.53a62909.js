(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffe25cba"],{"1c13":function(e,t,i){},2504:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("MyHeader",{attrs:{title:"订单确认"}}),i("svg",{staticStyle:{position:"absolute",width:"0px",height:"0px",overflow:"hidden"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("defs",[i("symbol",{attrs:{id:"icon-add",viewBox:"0 0 31 32"}},[i("title",[e._v("add")]),i("path",{staticClass:"path1",attrs:{d:"M30.745 15.152h-14.382v-14.596c0-0.308-0.243-0.557-0.543-0.557s-0.543 0.249-0.543 0.557v14.596h-14.665c-0.3 0-0.543 0.249-0.543 0.557s0.243 0.557 0.543 0.557h14.665v15.177c0 0.307 0.243 0.557 0.543 0.557s0.543-0.249 0.543-0.557v-15.177h14.382c0.3 0 0.543-0.249 0.543-0.557s-0.243-0.557-0.543-0.557z"}})]),i("symbol",{attrs:{id:"icon-edit",viewBox:"0 0 32 32"}},[i("title",[e._v("edit")]),i("path",{staticClass:"path1",attrs:{d:"M28.287 8.51l-4.805-4.806 0.831-0.831c0.472-0.472 1.086-0.777 1.564-0.777 0.248 0 0.452 0.082 0.622 0.253l3.143 3.144c0.539 0.54 0.133 1.529-0.524 2.186l-0.831 0.831zM26.805 9.992l-1.138 1.138-4.805-4.806 1.138-1.138 4.805 4.806zM24.186 12.612l-14.758 14.762-4.805-4.806 14.758-14.762 4.805 4.806zM7.379 28.288l-4.892 1.224 1.223-4.894 3.669 3.67zM31.123 4.011l-3.143-3.144c-0.567-0.567-1.294-0.867-2.103-0.867-1.036 0-2.174 0.52-3.045 1.391l-20.429 20.436c-0.135 0.134-0.23 0.302-0.276 0.487l-2.095 8.385c-0.089 0.355 0.017 0.736 0.276 0.995 0.198 0.198 0.461 0.307 0.741 0.307 0.085 0 0.171-0.010 0.254-0.031l8.381-2.096c0.185-0.047 0.354-0.142 0.487-0.276l20.43-20.436c1.409-1.41 2.042-3.632 0.524-5.15v0z"}})]),i("symbol",{attrs:{id:"icon-del",viewBox:"0 0 32 32"}},[i("title",[e._v("delete")]),i("path",{staticClass:"path1",attrs:{d:"M11.355 4.129v-2.065h9.29v2.065h-9.29zM6.194 29.935v-23.742h19.613v23.742h-19.613zM30.968 4.129h-8.258v-3.097c0-0.569-0.463-1.032-1.032-1.032h-11.355c-0.569 0-1.032 0.463-1.032 1.032v3.097h-8.258c-0.569 0-1.032 0.463-1.032 1.032s0.463 1.032 1.032 1.032h3.097v24.774c0 0.569 0.463 1.032 1.032 1.032h21.677c0.569 0 1.032-0.463 1.032-1.032v-24.774h3.097c0.569 0 1.032-0.463 1.032-1.032s-0.463-1.032-1.032-1.032v0z"}}),i("path",{staticClass:"path2",attrs:{d:"M10.323 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),i("path",{staticClass:"path3",attrs:{d:"M16 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),i("path",{staticClass:"path4",attrs:{d:"M21.677 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}})])])]),i("div",{staticClass:"confirm"},[i("div",{staticClass:"wrapper"},[i("div",{staticClass:"container"},[i("div",{staticClass:"order-box"},[i("div",{staticClass:"wrap-flex"},[i("div",{staticClass:"item-address"},[i("h2",{staticClass:"addr-title"},[e._v("收货地址")]),i("div",{staticClass:"addr-list"},[e._l(e.allAddress,(function(t,s){return i("div",{key:s,staticClass:"addr-info",class:{checked:e.addressId===t.id},on:{click:function(i){return e.selectAddress(t.id)}}},[i("h2",[e._v(e._s(t.receiverName))]),i("div",{staticClass:"phone"},[e._v(e._s(t.receiverMobile))]),i("div",{staticClass:"street"},[e._v(e._s(t.receiverProvince)+" "+e._s(t.receiverCity)+" "+e._s(t.receiverDistrict)+" "+e._s(t.receiverAddress)+" ")]),i("div",{staticClass:"action"},[i("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.delAddress()}}},[i("svg",{staticClass:"icon icon-del"},[i("use",{attrs:{"xlink:href":"#icon-del"}})])])])])})),i("div",{staticClass:"addr-add",on:{click:function(t){return e.addAddress()}}},[i("div",{staticClass:"icon-add"}),i("div",[e._v("添加新地址")])])],2)]),i("div",{staticClass:"item-good"},[i("h2",[e._v("商品")]),i("ul",e._l(e.cartSelect,(function(t,s){return i("li",{key:s},[i("div",{staticClass:"good-name"},[i("img",{attrs:{src:t.goods.cover}}),i("span",[e._v(e._s(e.getTitle(t.goods.params)))])]),i("div",{staticClass:"good-price"},[e._v(e._s(t.goods.sold_price)+"元 x "+e._s(t.nums))]),i("div",{staticClass:"good-total"},[e._v(e._s(t.goods.sold_price*t.nums)+"元")])])})),0)]),i("div",{staticClass:"item-note"},[i("h2",[e._v("订单留言")]),i("el-input",{staticClass:"text-note",attrs:{type:"textarea",autosize:"",placeholder:"请输入订单留言"},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1)]),i("div",{staticClass:"detail"},[i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("商品件数：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.totalNums)+"件")])]),i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("商品总价：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.totalPrice)+"元")])]),i("div",{staticClass:"item"},[i("span",{staticClass:"item-name"},[e._v("运费：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.totalPostAge)+"元")])]),i("div",{staticClass:"item-total"},[i("span",{staticClass:"item-name"},[e._v("应付总额：")]),i("span",{staticClass:"item-val"},[e._v(e._s(e.totalPrice+e.totalPostAge))])])]),i("div",{staticClass:"btn-group"},[i("a",{staticClass:"btn btn-default btn-large",attrs:{href:"/cart"}},[e._v("返回购物车")]),i("a",{staticClass:"btn btn-large",staticStyle:{"margin-right":"40px"},attrs:{href:"javascript:;"},on:{click:e.goSettlement}},[e._v("去结算")])])])])])]),i("modal",{attrs:{title:e.dialogTitle,btnType:"1",showModal:e.showEditModal},on:{cancel:function(t){e.showEditModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("div",{staticClass:"edit-wrap"},[i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:e.checkedItem.receiverName},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverName",t.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:e.checkedItem.receiverMobile},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverMobile",t.target.value)}}})]),i("div",{staticClass:"item"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province"},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverProvince",t.target.multiple?i:i[0])},e.getValue],click:function(t){return e.switchCity("province")}}},[i("option",{attrs:{selected:"",hidden:"",disabled:"",value:""}},[e._v("省份")]),e._l(e.provinceList,(function(t){return i("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.region_name)+" ")])}))],2),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city"},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverCity",t.target.multiple?i:i[0])},e.getCountryValue]}},[i("option",{attrs:{selected:"",hidden:"",disabled:"",value:""}},[e._v("地市")]),e._l(e.cityList,(function(t){return i("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.region_name)+" ")])}))],2),i("select",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"district"},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.checkedItem,"receiverDistrict",t.target.multiple?i:i[0])},e.getLastValue]}},[i("option",{attrs:{selected:"",hidden:"",disabled:"",value:""}},[e._v("县区")]),e._l(e.countryList,(function(t){return i("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.region_name))])}))],2)]),i("div",{staticClass:"item"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],attrs:{name:"street",placeholder:"无需重复填写省市区，小于75个字"},domProps:{value:e.checkedItem.receiverAddress},on:{input:function(t){t.target.composing||e.$set(e.checkedItem,"receiverAddress",t.target.value)}}})])])]},proxy:!0}])}),i("modal",{attrs:{title:"删除确认",btnType:"1",showModal:e.showDelModal},on:{cancel:function(t){e.showDelModal=!1},submit:e.submitAddress},scopedSlots:e._u([{key:"body",fn:function(){return[i("p",[e._v("您确认要删除此地址吗？")])]},proxy:!0}])})],1)},r=[],a=(i("12c4"),i("7c3e"),i("06f5")),c=i.n(a),n=(i("5580"),i("0cf6"),i("f6e5"),i("6931"),i("9839")),o=i("714b"),d={name:"confirm",components:{MyHeader:n["a"],Modal:o["a"]},data:function(){return{provinceList:[],cityList:[],countryList:[],note:"",addressId:"",pro:"",ci:"",dis:"",isSelect:"",dialogTitle:"",cartSelect:[],showDelModal:!1,showEditModal:!1,allAddress:[],checkedItem:{receiverName:"",receiverProvince:"",receiverCity:"",receiverDistrict:"",receiverMobile:"",receiverAddress:"",receiverZip:""}}},computed:{totalPrice:function(){var e=0,t=this.cartSelect.map((function(e){return e.nums*e.goods.sold_price}));return t.forEach((function(t){e+=t})),e},totalNums:function(){var e=0,t=this.cartSelect.map((function(e){return e.nums}));return t.forEach((function(t){e+=t})),e},totalPostAge:function(){var e=0,t=this.cartSelect.map((function(e){return e.nums*e.goods.weight}));return t.forEach((function(t){e+=t})),e}},mounted:function(){this.getCart(),this.getAddress()},methods:{getLastValue:function(){this.dis=this.checkedItem.receiverDistrict.region_name},getCountryValue:function(){var e=this;this.ci=this.checkedItem.receiverCity.region_name,console.log("您选择了",this.checkedItem.receiverCity,this.checkedItem.receiverCity.id,22),this.axios.get("/region/",{params:{region_parent_id:this.checkedItem.receiverCity.id}}).then((function(t){e.countryList=t.data.list.map((function(e){return{id:e.region_id,region_name:e.region_name}}))}))},getValue:function(){var e=this;console.log("您选择了",this.checkedItem.receiverProvince),this.pro=this.checkedItem.receiverProvince.region_name,this.axios.get("/region/",{params:{region_parent_id:this.checkedItem.receiverProvince.id}}).then((function(t){e.cityList=t.data.list.map((function(e){return{id:e.region_id,region_name:e.region_name}}))}))},switchCity:function(e){var t=this;console.log(e),"province"===e&&this.axios.get("/region/",{params:{region_level:1}}).then((function(e){t.provinceList=e.data.list.map((function(e){return{id:e.region_id,region_name:e.region_name}}))}))},getTitle:function(e){return e[0]["value"]},goSettlement:function(){var e=this;""!==this.addressId?this.axios.post("/orders/",{post_script:this.note||"默认",address:this.isSelect.receiverProvince+this.isSelect.receiverCity+this.isSelect.receiverDistrict+this.isSelect.receiverAddress,signer_name:this.isSelect.receiverName,singer_mobile:this.isSelect.receiverMobile,flag:1}).then((function(t){var i=t.data.order_sn;e.$router.push({path:"pay",query:{orderSn:i}})})):c.a.warning("请选择收货地址或者添加新地址")},selectAddress:function(e){this.addressId=e,this.isSelect=this.allAddress.find((function(t){return t.id===e}))},submitAddress:function(){var e=this,t=this.dialogTitle;"编辑地址"===t?this.axios.patch("/address/".concat(this.addressId),{province:this.checkedItem.receiverProvince,city:this.checkedItem.receiverCity,district:this.checkedItem.receiverDistrict,address:this.checkedItem.receiverAddress,signer_name:this.checkedItem.receiverName,signer_mobile:this.checkedItem.receiverMobile,stamp:this.checkedItem.receiverZip,is_select:!1}).then((function(){e.showEditModal=!1,e.getAddress()})):"删除地址"===t?this.axios.delete("/address/".concat(this.addressId)).then((function(){c.a.success("地址删除成功"),e.getAddress(),e.showEditModal=!1})):this.axios.post("/address/",{province:this.pro,city:this.ci,district:this.dis,address:this.checkedItem.receiverAddress,signer_name:this.checkedItem.receiverName,signer_mobile:this.checkedItem.receiverMobile,stamp:this.checkedItem.receiverZip,is_select:!1}).then((function(){c.a.success("地址添加成功"),e.showEditModal=!1,e.getAddress()}))},delAddress:function(){this.dialogTitle="删除地址",this.showDelModal=!0},editAddress:function(){var e=this;console.log("编辑",this.addressId,"/address/".concat(this.addressId)),this.dialogTitle="编辑地址",this.showEditModal=!0,this.axios.get("/address/".concat(this.addressId,"/")).then((function(t){console.log(t),e.checkedItem.receiverProvince=t.data.province,e.checkedItem.receiverCity=t.data.city,e.checkedItem.receiverDistrict=t.data.district,e.checkedItem.receiverName=t.data.signer_name,e.checkedItem.receiverMobile=t.data.signer_mobile,e.checkedItem.receiverAddress=t.data.address}))},addAddress:function(){this.dialogTitle="添加地址",this.showEditModal=!0},getCart:function(){var e=this;this.axios.get("/carts/").then((function(t){e.cartSelect=t.data.list.filter((function(e){return e.is_select}))}))},getAddress:function(){var e=this;this.axios.get("/address/").then((function(t){e.allAddress=t.data.list.map((function(e){return{receiverProvince:e.province,receiverCity:e.city,receiverDistrict:e.district,receiverAddress:e.address,receiverName:e.signer_name,receiverMobile:e.signer_mobile,receiverZip:e.static,select:e.is_select,id:e.id}}))}))}}},l=d,v=(i("cf52"),i("4ac2")),h=Object(v["a"])(l,s,r,!1,null,null,null);t["default"]=h.exports},9839:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"topBar"},[i("div",{staticClass:"container"},[i("div",{staticClass:"shop-user"},[e.username?[i("a",{attrs:{href:"/profile"}},[e._v(e._s(e.username)+"，你好")]),i("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.logout()}}},[e._v("退出")])]:[i("a",{attrs:{href:"/login"}},[e._v("你好，登录")]),i("a",{attrs:{href:"/register"}},[e._v("注册")])]],2),e._m(0)])]),i("div",{staticClass:"login-header"},[e._m(1),i("h2",[e._v(e._s(e.title))])])])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"shop-center"},[i("a",{attrs:{href:"/orderList"}},[e._v("我的订单")]),i("a",{attrs:{href:"/profile"}},[e._v("账户中心")]),i("a",{attrs:{href:"/message"}},[e._v("消息中心")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header-logo"},[s("a",{attrs:{href:"/index.html"}},[s("img",{attrs:{src:i("325a"),alt:"JapanHui"}})])])}],a=(i("12c4"),i("7c3e"),i("06f5")),c=i.n(a),n={name:"MyHeader",data:function(){return{}},props:{title:String},computed:{username:function(){return this.$store.state.username}},methods:{logout:function(){this.$cookie.set("username","",{expires:"-1"}),this.$cookie.set("uid","",{expires:"-1"}),this.$cookie.set("cart",0,{expires:"-1"}),this.$cookie.set("token","",{expires:"-1"}),this.$store.dispatch("saveUserName",""),this.$store.dispatch("saveToken",""),this.$store.dispatch("saveUid",""),this.$store.dispatch("saveCartNums",0),c.a.success("退出成功"),this.$router.push("/index.html")}}},o=n,d=(i("9d30"),i("4ac2")),l=Object(d["a"])(o,s,r,!1,null,null,null);t["a"]=l.exports},"9d30":function(e,t,i){"use strict";i("1c13")},a6d2:function(e,t,i){},cf52:function(e,t,i){"use strict";i("a6d2")},f6e5:function(e,t,i){"use strict";var s=i("9f87"),r=i("ee9a").find,a=i("698a"),c="find",n=!0;c in[]&&Array(1)[c]((function(){n=!1})),s({target:"Array",proto:!0,forced:n},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(c)}}]);
//# sourceMappingURL=chunk-ffe25cba.53a62909.js.map